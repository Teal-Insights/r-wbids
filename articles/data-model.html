<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>wbids Data Model • wbids</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="data-model_files/libs/quarto-html/popper.min.js"></script><script src="data-model_files/libs/quarto-html/tippy.umd.min.js"></script><link href="data-model_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="data-model_files/libs/quarto-html/light-border.css" rel="stylesheet">
<script src="data-model_files/libs/quarto-diagram/mermaid.min.js"></script><script src="data-model_files/libs/quarto-diagram/mermaid-init.js"></script><link href="data-model_files/libs/quarto-diagram/mermaid.css" rel="stylesheet">
<!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="wbids Data Model">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">wbids</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/data-model.html">`wbids` Data Model</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/teal-insights/r-wbids/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-quarto">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>
<code>wbids</code> Data Model</h1>




      <small class="dont-index">Source: <a href="https://github.com/teal-insights/r-wbids/blob/main/vignettes/data-model.qmd" class="external-link"><code>vignettes/data-model.qmd</code></a></small>
      <div class="d-none name"><code></code></div>
    </div>






    <section class="level2"><h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>The diagram below shows the data model of the <code>wbids</code> package. In our design, we primarily have R users in mind, particularly those who rely heavily on the popular data manipulation packages <code>dplyr</code> and <code>data.table</code>. For these users, having consistent and descriptive primary key column names across different tables (e.g., <code>geography_id</code>, <code>series_id</code>) simplifies writing joins across tables, reduces the risk of column name conflicts, and avoids ambiguity. We hence deliberately deviate from a common practice in data modeling to omit the entity prefix from a entity table (e.g. <code>geography_</code> in the geographies table).</p>
<div class="cell" data-fig-width="12" data-fig-height="8" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p>
<figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">erDiagram
    GEOGRAPHIES ||--o{ DEBT_STATISTICS : has
    GEOGRAPHIES {
        string geography_id PK
        string geography_name
        string geography_iso2code
        string geography_type
        string capital_city
        string region_id
        string region_iso2code
        string region_name
        string admin_region_id
        string admin_region_iso2code
        string admin_region_name
        string lending_type_id
        string lending_type_iso2code
        string lending_type_name
    }
    SERIES ||--o{ DEBT_STATISTICS : has
    SERIES ||--o{ SERIES_TOPICS : has
    SERIES {
        string series_id PK
        string series_name
        int source_id
        string source_note
        string source_organization
    }
    COUNTERPARTS ||--o{ DEBT_STATISTICS : has
    COUNTERPARTS {
        string counterpart_id PK
        string counterpart_name
        string counterpart_iso2code
        string counterpart_iso3code
        string counterpart_type
    }
    SERIES_TOPICS {
        string series_id FK
        int topic_id
        string topic_name
    }
    DEBT_STATISTICS {
        string series_id FK
        string geography_id FK
        string counterpart_id FK
        int year
        float value
    }
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section><section class="level2"><h2 id="table-details">Table Details<a class="anchor" aria-label="anchor" href="#table-details"></a>
</h2>
<section class="level3"><h3 id="geographies">Geographies<a class="anchor" aria-label="anchor" href="#geographies"></a>
</h3>
<table class="table caption-top">
<colgroup>
<col style="width: 23%">
<col style="width: 52%">
<col style="width: 23%">
</colgroup>
<thead><tr class="header">
<th>Column name</th>
<th>Description</th>
<th>Example value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>geography_id</td>
<td>ISO 3166-1 alpha-3 code of the geography</td>
<td>ZMB</td>
</tr>
<tr class="even">
<td>geography_name</td>
<td>Standardized name of the geography</td>
<td>Zambia</td>
</tr>
<tr class="odd">
<td>geography_iso2code</td>
<td>ISO 3166-1 alpha-2 code of the geography</td>
<td>ZM</td>
</tr>
<tr class="even">
<td>geography_type</td>
<td>Type of geography (e.g., country, region)</td>
<td>Country</td>
</tr>
<tr class="odd">
<td>capital_city</td>
<td>Capital city of the geography</td>
<td>Lusaka</td>
</tr>
<tr class="even">
<td>region_id</td>
<td>Unique identifier for the region</td>
<td>SSF</td>
</tr>
<tr class="odd">
<td>region_iso2code</td>
<td>ISO 3166-1 alpha-2 code of the region</td>
<td>ZG</td>
</tr>
<tr class="even">
<td>region_name</td>
<td>Name of the region</td>
<td>Sub-Saharan Africa</td>
</tr>
<tr class="odd">
<td>admin_region_id</td>
<td>Unique identifier for the administrative region</td>
<td>SSA</td>
</tr>
<tr class="even">
<td>admin_region_iso2code</td>
<td>Unique identifier for the administrative region</td>
<td>ZF</td>
</tr>
<tr class="odd">
<td>admin_region_name</td>
<td>Name of the administrative region</td>
<td>Sub-Saharan Africa (excluding high income)</td>
</tr>
<tr class="even">
<td>lending_type_id</td>
<td>Unique identifier for the lending type</td>
<td>IDX</td>
</tr>
<tr class="odd">
<td>lending_type_iso2code</td>
<td>ISO code of the lending type</td>
<td>XI</td>
</tr>
<tr class="even">
<td>lending_type_name</td>
<td>Name of the lending type</td>
<td>IDA</td>
</tr>
</tbody>
</table></section><section class="level3"><h3 id="counterparts">Counterparts<a class="anchor" aria-label="anchor" href="#counterparts"></a>
</h3>
<table class="table caption-top">
<colgroup>
<col style="width: 23%">
<col style="width: 52%">
<col style="width: 23%">
</colgroup>
<thead><tr class="header">
<th>Column name</th>
<th>Description</th>
<th>Example value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>counterpart_id</td>
<td>Unique identifier for the counterpart</td>
<td>730</td>
</tr>
<tr class="even">
<td>counterpart_name</td>
<td>Standardized name of the counterpart</td>
<td>China</td>
</tr>
<tr class="odd">
<td>counterpart_iso2code</td>
<td>ISO 3166-1 alpha-2 code of the counterpart</td>
<td>CN</td>
</tr>
<tr class="even">
<td>counterpart_iso3code</td>
<td>ISO 3166-1 alpha-3 code of the counterpart</td>
<td>CHN</td>
</tr>
<tr class="odd">
<td>counterpart_type</td>
<td>Type of counterpart (e.g., institution, country, region)</td>
<td>Country</td>
</tr>
</tbody>
</table></section><section class="level3"><h3 id="series">Series<a class="anchor" aria-label="anchor" href="#series"></a>
</h3>
<table class="table caption-top">
<colgroup>
<col style="width: 23%">
<col style="width: 28%">
<col style="width: 47%">
</colgroup>
<thead><tr class="header">
<th>Column name</th>
<th>Description</th>
<th>Example value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>series_id</td>
<td>Unique identifier for the data series</td>
<td>DT.DOD.DPPG.CD</td>
</tr>
<tr class="even">
<td>series_name</td>
<td>Name of the series</td>
<td>External debt stocks, public and publicly guaranteed (PPG) (DOD, current US$)</td>
</tr>
<tr class="odd">
<td>source_id</td>
<td>Unique identifier for the data source</td>
<td>2</td>
</tr>
<tr class="even">
<td>source_note</td>
<td>Note about the data source</td>
<td>Public and publicly guaranteed debt comprises long-term external obligations of public debtors, including the national government, Public Corporations, State Owned Enterprises, Development Banks and Other Mixed Enterprises, political subdivisions (or an agency of either), autonomous public bodies, and external obligations of private debtors that are guaranteed for repayment by a public entity. Data are in current U.S. dollars.</td>
</tr>
<tr class="odd">
<td>source_organization</td>
<td>Organization responsible for the data series</td>
<td>World Bank, International Debt Statistics.</td>
</tr>
</tbody>
</table></section><section class="level3"><h3 id="debt-statistics">Debt Statistics<a class="anchor" aria-label="anchor" href="#debt-statistics"></a>
</h3>
<table class="table caption-top">
<thead><tr class="header">
<th>Column name</th>
<th>Description</th>
<th>Example value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>series_id</td>
<td>Identifier for the series</td>
<td>DT.DOD.DPPG.CD</td>
</tr>
<tr class="even">
<td>geography_id</td>
<td>Identifier for the geography</td>
<td>ZMB</td>
</tr>
<tr class="odd">
<td>counterpart_id</td>
<td>Identifier for the counterpart</td>
<td>061.</td>
</tr>
<tr class="even">
<td>year</td>
<td>Year of the data point</td>
<td>2020</td>
</tr>
<tr class="odd">
<td>value</td>
<td>Value of the data point</td>
<td>4298957000</td>
</tr>
</tbody>
</table></section></section><section class="level2"><h2 id="assignment-of-geography-and-counterpart-types">Assignment of Geography and Counterpart Types<a class="anchor" aria-label="anchor" href="#assignment-of-geography-and-counterpart-types"></a>
</h2>
<p>The original World Bank IDS data includes a ‘country’ field, containing both countries and regions, and a ‘counterpart-area’ field, which may include countries, regions, and institutions. In our data model, these fields are renamed to ‘geography’ and ‘counterpart’ to clarify the types of entities in each column.</p>
<p>We also introduce corresponding type columns that specify whether a geography is a country (e.g., “Aruba”) or a region (e.g., “Africa Eastern and Southern”), and whether a counterpart is a country, region, or a special category (e.g., “Global IFIs”, “Global MDBs”). Each counterpart is represented in the geography table if it is a country or region, ensuring consistency across both tables.</p>
</section><section class="level2"><h2 id="harmonization-of-geography-and-counterpart-names">Harmonization of Geography and Counterpart Names<a class="anchor" aria-label="anchor" href="#harmonization-of-geography-and-counterpart-names"></a>
</h2>
<p>In some cases, the IDS data provides different names for geographies that appear both in the ‘counterpart-area’ and the ‘country’ data. We use the geography names whenever they are available and drop counterpart names with different wording. For instance, if the original data features “Cote D`Ivoire, Republic Of” in the counterpart table, but the country name is “Cote d’Ivoire”, then we overwrite the former with the latter.</p>
</section><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'light-border',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config);
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script></main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Teal Emery, Christoph Scheuch.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
