---
title: "Data Model"
format: html
vignette: >
  %\VignetteIndexEntry{Vignette's Title}
  %\VignetteEngine{quarto::html}
  %\VignetteEncoding{UTF-8}
---

## Overview

The diagram below shows the data model of the `wbids` package. In our design, we primarily have R users in mind, particularly those who rely heavily on the popular data manipulation packages `dplyr` and `data.table`. For these users, having consistent and descriptive primary key column names across different tables (e.g., `geography_id`, `series_id`) simplifies writing joins across tables, reduces the risk of column name conflicts, and avoids ambiguity. This approach enhances clarity and makes the data model more intuitive to work with, especially when handling multiple joins in complex queries.

```{mermaid}
%%| fig-width: 12
%%| fig-height: 8
erDiagram
    GEOGRAPHIES ||--o{ INTERNATIONAL_DEBT_STATISTICS : has
    GEOGRAPHIES {
        string geography_id PK
        string geography_name
        string geography_iso3code
        string geography_iso2code
        string geography_type
        string geography_capital
        string region_id
        string region_iso2code
        string region_name
        string admin_region_id
        string admin_region_name
        string lending_type_id
        string lending_type_iso2code
        string lending_type_name
    }
    SERIES ||--o{ INTERNATIONAL_DEBT_STATISTICS : has
    SERIES ||--o{ SERIES_TOPICS : has
    SERIES {
        string series_id PK
        string series_name
        string source_note
        string source_organization
    }
    COUNTERPARTS ||--o{ INTERNATIONAL_DEBT_STATISTICS : has
    COUNTERPARTS {
        string counterpart_id PK
        string counterpart_name
        string counterpart_iso3code
        string counterpart_type
    }
    SERIES_TOPICS {
        string series_id FK
        int topic_id 
        string topic_name 
    }
    INTERNATIONAL_DEBT_STATISTICS {
        string series_id FK
        string geography_id FK
        string counterpart_id FK
        int year
        float value
    }
```
